# Деплой NutsShop на Render.com

Цей репозиторій налаштований для автоматичного розгортання на Render.com з використанням IaC (Infrastructure as Code).

## Компоненти системи

Проект складається з наступних компонентів:
- **Бекенд API** (Laravel)
- **Фронтенд** (Nuxt 3)
- **База даних** (PostgreSQL)

## Як розгорнути

### 1. Створіть обліковий запис у Render.com

Якщо у вас ще немає облікового запису Render.com, [зареєструйтесь](https://dashboard.render.com/register).

### 2. Підключіть GitHub репозиторій

- Перейдіть у [Render Dashboard](https://dashboard.render.com/)
- Натисніть "New" > "Blueprint"
- Виберіть репозиторій з GitHub
- Натисніть "Connect"

### 3. Налаштування Blueprint

Render автоматично виявить файл `render.yaml` у корені репозиторію та запропонує створити всі сервіси, визначені в ньому.

- Перегляньте конфігурацію і натисніть "Apply"
- Render створить усі необхідні сервіси:
  - Web-сервіс для бекенду (API)
  - Web-сервіс для фронтенду
  - PostgreSQL базу даних

### 4. Конфігурація середовища

Основні змінні середовища вже визначено у файлі `render.yaml` як статичні значення або посилання на інші сервіси. Деякі секретні значення (наприклад, `APP_KEY`) будуть згенеровані автоматично.

**Важливо**: Після розгортання вам, можливо, потрібно буде вручну оновити адреси сервісів:
- У бекенд-сервісі: `APP_URL` та `FRONTEND_URL`
- У фронтенд-сервісі: `NUXT_PUBLIC_API_URL`

### 5. Доступ до проекту

Після успішного розгортання, ви можете отримати доступ до наступних URL:

- Фронтенд: `https://nutsshop-frontend.onrender.com`
- API: `https://nutsshop-api.onrender.com/api`

## Структура розгортання

### Backend (Laravel)

- Запускається в Docker-контейнері
- Використовує Nginx + PHP-FPM
- Supervisor керує процесами
- Автоматично виконує міграції

### Frontend (Nuxt 3)

- Запускається в Docker-контейнері
- Використовує середовище SSR (Server-Side Rendering)
- Підключається до бекенд API через змінні середовища

### База даних (PostgreSQL)

- Використовує план basic-1gb
- Доступна тільки через внутрішню мережу Render

## Моніторинг і діагностика

- Ендпоінт `/api/health` доступний для перевірки стану бекенду
- Логи доступні через Render Dashboard

## Інші файли конфігурації

- `Dockerfile` - конфігурація Docker для бекенду
- `frontend/Dockerfile` - конфігурація Docker для фронтенду
- `docker-entrypoint.sh` - скрипт ініціалізації для бекенду
- `.dockerignore` і `frontend/.dockerignore` - файли, які потрібно ігнорувати при створенні Docker-образів
- `devops/supervisor/supervisord.conf` - конфігурація Supervisor 