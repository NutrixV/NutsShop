# Юніт-тести NutsShop

Цей каталог містить юніт-тести для базових компонентів NutsShop - моделей та сервісів.

## Структура каталогу

- `Models/` - тести для моделей бази даних
  - `CustomerEntityTest.php` - тести для моделі клієнта
  - `CatalogProductTest.php` - тести для моделі продукту
  - `QuoteTest.php` - тести для моделі кошика
  - `SalesOrderTest.php` - тести для моделі замовлення
- `Services/` - тести для сервісних класів
  - `CartServiceTest.php` - тести для сервісу кошика

## Запуск юніт-тестів

### Використання Docker

```bash
docker compose exec php php artisan test --testsuite=Unit
```

Для запуску окремого тесту:

```bash
docker compose exec php php artisan test --filter=CustomerEntityTest
```

### Звіт про покриття коду (якщо встановлений Xdebug)

```bash
docker compose exec php php artisan test --testsuite=Unit --coverage
```

## Загальні принципи написання юніт-тестів

1. **Незалежність**: кожен тест повинен бути незалежним від інших тестів
2. **Ізоляція**: тести не повинні залежати від зовнішніх ресурсів
3. **Швидкість**: юніт-тести повинні виконуватися швидко
4. **Покриття**: тести повинні покривати усі основні функції класу

## Використання фабрик моделей

Всі тести використовують фабрики для створення тестових даних. Фабрики знаходяться в `backend/database/factories/`.

Приклад використання фабрики:

```php
$customer = CustomerEntity::factory()->create();
```

## Додавання нових тестів

1. Створіть новий тестовий клас у відповідному каталозі (Models або Services)
2. Назвіть файл за шаблоном `{ClassUnderTest}Test.php`
3. Використовуйте трейт `RefreshDatabase` для тестів, що працюють з базою даних
4. Пишіть окремі методи для кожного тестового випадку
5. Використовуйте префікс `test_` для назви методу

## Відомі проблеми

- Тести використовують реальні фабрики моделей, тому вони можуть бути повільнішими
- Деякі тести можуть потребувати доповнення у майбутньому при додаванні нової функціональності

## Майбутні вдосконалення

- Додати тести для решти сервісів та моделей
- Підвищити покриття коду
- Додати моки для прискорення тестів 